========================================
ps1gen - M4 based shell prompt generator
========================================

Once upon a time, my ``.bashrc`` file contained the following line: ::

    PS1='[\e[91m\u\e[0m@\e[36m\h\e[97;1m \W\e[0m]\$ '

Not only is this extremly hard to read or modify, it's also buggy: You have to surround the escape
codes in escaped brackets (e.g. ``\[\e[91m\]`` instead of ``\e[91m``) or bash won't be able to compute
the length of the prompt and line breaks will go crazy (You can try this at home by using the above
prompt and then holding down your ``a`` key. Watch how the line manages to break into... itself before
it even reaches the right end of your terminal!). The fixed version of my prompt would therefore
be ::

    PS1='[\[\e[91m\]\u\[\e[0m\]@\[\e[36m\]\h\[\e[97;1m\] \W\[\e[0m\]]\$ '

Which somehow manages to be even more ugly than the first version.

The Fix
-------
``m4``, of course! By defining a few simple macros the above prompt can be generated by this
script: ::

    styled(`[', reset)
    styled(`\u', red)
    styled(`@', reset)
    styled(`\h', cyan)
    styled(` ', reset)
    styled(`\W', white, bold)
    styled(`]\$ ', reset)

Which is much longer, but also much easier to read and change. For the curious, the generated
prompt is ::

    \[$(tput sgr0)\][\[$(tput setaf 1)\]\u\[$(tput sgr0)\]@\[$(tput setaf 6)\]\h\[$(tput sgr0)\] \[$(tput setaf 7)$(tput bold)\]\W\[$(tput sgr0)\]]\$

Usage
-----
Put the ``ps1gen.m4`` file somewhere on your system (for example, in your home directory),
change it to your liking, and modify your ``.bashrc`` accordingly: ::

    PS1=`m4 ps1gen.m4`

Done! The next time you start bash (or ``source ~/.bashrc``) you can enjoy your new awesome
prompt!
